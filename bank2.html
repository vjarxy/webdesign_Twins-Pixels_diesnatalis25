<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReWaste - Beranda</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="assets/style.css">
</head>
<body>

<!-- ===================== NAVBAR ===================== -->
<header class="rw-navbar">
    <div class="rw-nav-toggle">
        <i class="fa-solid fa-bars"></i>
    </div>
    <div class="rw-nav-container">
        <div class="rw-logo">
            <img src="assets/img/logo.png" alt="Logo ReWaste">
            <span>ewaste</span>
        </div>

        <nav class="rw-nav-menu" id="rwNavMenu">
            <a href="beranda.html">Beranda</a>
            <a href="edukasi.html">Edukasi</a>
            <a href="bank.html" class="active">Bank Sampah</a>
            <a href="galeri.html">Galeri</a>
            <a href="kontak.html">Kontak</a>
            <a href="login.html"><button class="rw-login-btn">Login</button></a>
        </nav>

        <div class="rw-nav-toggle" id="rwNavToggle">
            <i class="fa-solid fa-bars"></i>
        </div>
    </div>
</header>

<!-- ===================== HERO BANK STEP ===================== -->
<section class="bank-hero">
    <div class="bank-hero-overlay"></div>

    <div class="bank-hero-content">
        <h1>Ayo, Tukarkan Sampahmu!</h1>
        <p>Jadikan Lingkungan Lebih Bersih dengan Cara Upload Fotonya, Masukkan Berat, 
        Langsung Dapat Koin yang Bisa Ditukar ke Saldo E-Wallet. Praktis, Cepat, Aman.</p>
    </div>
</section>

<!-- ===================== JENIS SAMPAH BOX ===================== -->
<section class="jenis-sampah-wrapper">
    <div class="jenis-sampah-box">
        <h3 class="jenis-title">Pilih Jenis Sampah</h3>

        <div class="jenis-option">
            <button class="btn-jenis">Organik</button>
            <button class="btn-jenis">Anorganik</button>
            <button class="btn-jenis">B3</button>
        </div>
    </div>
</section>

<!-- ===================== FORM TUKARKAN SAMPAH SESUAI GAMBAR ===================== -->
<section class="tukar-section">

    <h2 class="tukar-title">Tukarkan Sampahmu</h2>

    <!-- ========== STEP INDICATOR BARU ========== -->
    <div class="steps-container">

        <div class="step-item active">
            <div class="step-icon">
                <div class="step-number">1</div>
                <div class="step-box"></div>
            </div>
    
            <div class="step-right">
                <div class="step-line"></div>
                <p class="step-text">Detail Penukaran</p>
            </div>
        </div>
    
        <div class="step-item">
            <div class="step-icon">
                <div class="step-number">2</div>
                <div class="step-box"></div>
            </div>
    
            <div class="step-right">
                <div class="step-line"></div>
                <p class="step-text">Lokasi Penukaran</p>
            </div>
        </div>

        <div class="step-item inactive">
            <div class="step-icon">
                <div class="step-number">3</div>
                <div class="step-box"></div>
            </div>
    
            <div class="step-right">
                <div class="step-line"></div>
                <p class="step-text">Konfirmasi Penukaran</p>
            </div>
        </div>
    
    </div>
    
    <!-- ========== FORM BOX ========== -->
    <div class="tukar-form-2">

        <!-- LEFT: PREVIEW AREA -->
        <div class="preview-column-2">
            <div class="map-wrapper-2">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3956.5698568284524!2d112.7160938749923!3d-7.446876473109228!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2dd7e51efb4df4cb%3A0x8ef421247e0ab0e7!2sSidoarjo%2C%20Kec.%20Sidoarjo%2C%20Kabupaten%20Sidoarjo%2C%20Jawa%20Timur!5e0!3m2!1sen!2sid!4v1700000000000!5m2!1sen!2sid"
                    width="100%"
                    height="310"
                    style="border:0; border-radius:12px;"
                    allowfullscreen=""
                    loading="lazy">
                </iframe>
            </div>
        </div>
    
        <!-- RIGHT: INPUT FORM -->
        <div class="input-column-2">
    
            <label>Masukkan Lokasi Awal</label>
            <input type="text" placeholder="Jl. Rajawali No. 12">
    
            <label>Pusat Lokasi yang Ingin Diantar</label>

            <div class="location-options">
                <button>Sidoarjo Kota</button>
                <button>Sidoarjo Barat</button>
                <button>Sidoarjo Selatan</button>
            </div>

            <!-- BUTTONS -->
            <div class="btn-row-2">
                <button class="btn-tambah-2" onclick="window.location.href='bank1.html'">Kembali</button>
                <button class="btn-simpan-2" id="btnAntarLokasi">Antar ke Lokasi</button>
            </div>
    
        </div>
    </div>
    

</section>

<!-- ===================== FLOATING CHATBOT BUTTON ===================== -->
<div class="rw-chatbot-btn" id="chatbotBtn">
    <i class="fa-solid fa-comments"></i>
</div>

<div class="rw-chatbot-popup" id="chatbotPopup">
    <div class="rw-chatbot-header">
        <span>Rewaste Chatbot</span>
        <i class="fa-solid fa-xmark" id="chatbotClose"></i>
    </div>

    <div class="rw-chatbot-body" id="chatbotBody">
        <div class="bot-msg">
            Halo! Ada yang bisa saya bantu? ðŸ˜Š
        </div>
    </div>

    <div class="rw-chatbot-input">
        <input type="text" id="chatbotInput" placeholder="Ketik pesan...">
        <button id="chatbotSend"><i class="fa-solid fa-paper-plane"></i></button>
    </div>
</div>

<!-- ===================== FOOTER ===================== -->
<footer class="rw-footer">
    <div class="rw-footer-container">

        <!-- LEFT: Logo + Description -->
        <div class="rw-footer-brand">
            <div class="rw-footer-logo">
                <img src="assets/img/logo.png" alt="Logo">
                <span>ewaste</span>
            </div>
            <p>
                Platform edukasi sampah dan bank sampah digital untuk membantu siapa saja belajar, beraksi, dan memberi dampak nyata bagi lingkungan.
            </p>

            <div class="rw-footer-socials">
                <a href="#"><i class="fa-brands fa-facebook"></i></a>
                <a href="#"><i class="fa-brands fa-instagram"></i></a>
                <a href="#"><i class="fa-brands fa-twitter"></i></a>
            </div>
        </div>

        <!-- MIDDLE: Navigation -->
        <div class="rw-footer-links">
            <h4>Navigasi</h4>
            <a href="#">Beranda</a>
            <a href="#">Edukasi</a>
            <a href="#">Bank Sampah</a>
            <a href="#">Galeri</a>
            <a href="#">Kontak</a>
        </div>

        <!-- RIGHT: Help -->
        <div class="rw-footer-links">
            <h4>Bantuan</h4>
            <a href="#">Cara Kerja</a>
            <a href="#">FAQ</a>
            <a href="#">Pusat Bantuan</a>
            <a href="#">Hubungi Kami</a>
        </div>

        <!-- RIGHT MOST â€“ Newsletter -->
        <div class="rw-footer-news">
            <h4>Dapatkan Informasi</h4>

            <div class="rw-footer-input-box">
                <input type="text" placeholder="Email Anda...">
                <button><i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <br><hr class="hr">

    <div class="rw-footer-bottom">
        <p>Copyright Â© 2025 <span>Rewaste.</span> All rights reserved.</p>
    </div>
    
    <div class="rw-footer-corner top-right"></div>
    <div class="rw-footer-corner bottom-left"></div>
    <div class="rw-footer-half-circle top-center"></div>
</footer>

<!-- ========== POPUP SUCCESS ========== -->
<div class="popup-success" id="popupSuccess">
    <div class="popup-box">
        <div class="check-wrapper">
            <i class="fas fa-check"></i>
        </div>
        <p>Berhasil!</p>
    </div>
</div>

<script src="assets/script.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const btn = document.getElementById("chatbotBtn");
        const popup = document.getElementById("chatbotPopup");
        const closeBtn = document.getElementById("chatbotClose");
        const input = document.getElementById("chatbotInput");
        const body = document.getElementById("chatbotBody");
        const sendBtn = document.getElementById("chatbotSend");
        const buttons = document.querySelectorAll(".btn-jenis");
        const inputLokasiAwal = document.querySelector("input[placeholder='Jl. Rajawali No. 12']");
        const lokasiButtons = document.querySelectorAll(".location-options button");
        const antarButton = document.getElementById("btnAntarLokasi");
        const popupsuccess = document.getElementById("popupSuccess");

        let lokasiTujuan = "";


        lokasiButtons.forEach(btn => {
            btn.addEventListener("click", () => {

                lokasiButtons.forEach(b => b.classList.remove("active-location"));
                btn.classList.add("active-location");

                lokasiTujuan = btn.textContent;
            });
        });

        // ========== Simpan ke localStorage saat klik "Antar ke Lokasi" ==========
        antarButton.addEventListener("click", function (event) {

            event.preventDefault(); // cegah pindah halaman dulu

            const lokasiAwal = inputLokasiAwal.value.trim();
            const jenis = document.querySelector(".btn-jenis.active")?.textContent || "";

            if (lokasiAwal === "" || lokasiTujuan === "") {
                alert("Isi lokasi awal dan pilih lokasi tujuan dahulu!");
                return;
            }

            // Simpan ke localStorage
            localStorage.setItem("lokasi_awal", lokasiAwal);
            localStorage.setItem("lokasi_tujuan", lokasiTujuan);
            localStorage.setItem("jenis_sampah", jenis);

            // Tampilkan popup
            popupsuccess.classList.add("show");

            // Setelah animasi â†’ pindah halaman
            setTimeout(() => {
                window.location.href = "bank3.html";
            }, 3000);
        });
        
        buttons[0].classList.add("active");

        buttons.forEach(btn => {
            btn.addEventListener("click", () => {
                // Hilangkan active dari semua tombol
                buttons.forEach(b => b.classList.remove("active"));
                // Tambahkan active pada tombol yang diklik
                btn.classList.add("active");
            });
        });

        if (!btn || !popup || !closeBtn) {
            console.warn("Chatbot tidak aktif di halaman ini.");
        } else {
            // Toggle popup
            btn.addEventListener("click", () => popup.classList.add("show"));
            closeBtn.addEventListener("click", () => popup.classList.remove("show"));

            // Kirim pesan
            function sendMessage() {
                const text = input.value.trim();
                if (!text) return;

                let userBubble = document.createElement("div");
                userBubble.className = "user-msg";
                userBubble.textContent = text;
                body.appendChild(userBubble);

                input.value = "";

                setTimeout(() => {
                    let botBubble = document.createElement("div");
                    botBubble.className = "bot-msg";
                    botBubble.textContent = "Terima kasih! Saya sedang memproses pertanyaan Anda.";
                    body.appendChild(botBubble);

                    body.scrollTop = body.scrollHeight;
                }, 600);

                body.scrollTop = body.scrollHeight;
            }

            sendBtn.addEventListener("click", sendMessage);
            input.addEventListener("keypress", (e) => { if (e.key === "Enter") sendMessage(); });
        }
    });
</script>
</body>
</html>
